import{b as k,c as q,d as P,r as d,j as e,g as A}from"./index-Easth5WQ.js";import{N as f,F as y}from"./Footer-BbzoLKkH.js";function z(){var j,N,u,b;const{items:o,getCartTotal:v,clearCart:g}=k(),{user:s}=q(),C=P(),[m,h]=d.useState(!1),[l,F]=d.useState({firstName:(s==null?void 0:s.firstName)||"",lastName:(s==null?void 0:s.lastName)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",street:((j=s==null?void 0:s.address)==null?void 0:j.street)||"",city:((N=s==null?void 0:s.address)==null?void 0:N.city)||"",state:((u=s==null?void 0:s.address)==null?void 0:u.state)||"",zipCode:((b=s==null?void 0:s.address)==null?void 0:b.zipCode)||""}),[n,x]=d.useState("card"),r=v(),i=r>100?0:15,p=r*.08,w=r+i+p,t=a=>{F({...l,[a.target.name]:a.target.value})},S=async a=>{a.preventDefault(),h(!0);try{const c={shippingAddress:l,paymentMethod:n};(await A.createOrder(c)).success&&(await g(),C("/profile",{state:{message:"Order placed successfully!"}}))}catch(c){alert("Failed to place order: "+c.message)}finally{h(!1)}};return o.length===0?e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx("div",{className:"container",style:{paddingTop:"120px",minHeight:"60vh"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{children:"Your cart is empty"}),e.jsx("p",{children:"Add items to your cart before checkout"})]})}),e.jsx(y,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs("div",{className:"container",style:{paddingTop:"120px",paddingBottom:"80px"},children:[e.jsx("h2",{className:"text-center mb-5",style:{color:"#2C1810",fontFamily:"Playfair Display, serif"},children:"Checkout"}),e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-8",children:[e.jsx("div",{className:"card mb-4",style:{borderRadius:"15px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Shipping Address"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"First Name"}),e.jsx("input",{type:"text",className:"form-control",name:"firstName",value:l.firstName,onChange:t,required:!0})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Last Name"}),e.jsx("input",{type:"text",className:"form-control",name:"lastName",value:l.lastName,onChange:t,required:!0})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",name:"email",value:l.email,onChange:t,required:!0})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Phone"}),e.jsx("input",{type:"tel",className:"form-control",name:"phone",value:l.phone,onChange:t})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Street Address"}),e.jsx("input",{type:"text",className:"form-control",name:"street",value:l.street,onChange:t,required:!0})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"City"}),e.jsx("input",{type:"text",className:"form-control",name:"city",value:l.city,onChange:t,required:!0})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"State"}),e.jsx("input",{type:"text",className:"form-control",name:"state",value:l.state,onChange:t,required:!0})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"ZIP Code"}),e.jsx("input",{type:"text",className:"form-control",name:"zipCode",value:l.zipCode,onChange:t,required:!0})]})]})]})}),e.jsx("div",{className:"card",style:{borderRadius:"15px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Payment Method"}),e.jsxs("div",{className:"form-check mb-2",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"paymentMethod",id:"card",value:"card",checked:n==="card",onChange:a=>x(a.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"card",children:"Credit/Debit Card"})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"paymentMethod",id:"paypal",value:"paypal",checked:n==="paypal",onChange:a=>x(a.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"paypal",children:"PayPal"})]})]})})]}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"card",style:{borderRadius:"15px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Order Summary"}),e.jsx("hr",{}),o.map(a=>{var c;return e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsxs("span",{children:[(c=a.product)==null?void 0:c.title," x",a.quantity]}),e.jsxs("span",{children:["$",(a.price*a.quantity).toFixed(2)]})]},a._id)}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",r.toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Shipping:"}),e.jsx("span",{children:i===0?"Free":`$${i.toFixed(2)}`})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Tax:"}),e.jsxs("span",{children:["$",p.toFixed(2)]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold mb-3",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",w.toFixed(2)]})]}),e.jsx("button",{type:"submit",className:"btn btn-luxury w-100",disabled:m,children:m?"Processing...":"Place Order"})]})})})]})})]}),e.jsx(y,{})]})}export{z as default};
